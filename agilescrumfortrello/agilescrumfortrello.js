var AST=AST||{};(function(a){$(a).ready(function(){AST=(function(k){var z="Agile SCRUM for Trello boards",r="1.4.3",g=/\([0-9\.]{1,6}\/[0-9\.]{1,6}\)/,e=/\([0-9\.]{1,6}\//,h=/\/[0-9\.]{1,6}\)/,J=/\([0-9\.]{1,5}\)/,b=/[0-9\.]+/,H=/\[([a-zA-ZáãàâäéèẽêëíìĩîïóòõôöúùũûüçÁÃÀÂÄÉÈẼÊËÍÌĨÎÏÓÒÕÔÖÚÙŨÛÜÇ0-9 \_\-\.\#]*)\]/g,u=/>\*{3} .+ \*{3}$/i,t=1,s=false,L="",l=false,w=5000,I=0,N=0,O=0,q=false,x=0,m=0,p=false,P=0,f=0,d=false,D=0,E=0,F=false,C=false;k.init=function(){console.info(z+" v"+r+" started");y();v()};var y=function(){v();l=setInterval(function(){B()},w)};var B=function(){var A=$("#board").html().length;if(I!==A){I=A;v()}};var v=function(){s=($("body").css("background-color")&&!$("body").hasClass("body-custom-board-background"))?$("body").css("background-color"):"rgb(55, 158, 90)";n();$("#board").find(".list-cards").each(function(){q=$(this);q.find(".list-card").each(function(){d=$(this);if(c(d)){return -2}if(!$(d).find(".list-card-title").html().match(/<small /g)){F=$(d).find(".list-card-title").html();d.data("original",F)}else{F=d.data("original");$(d).find(".list-card-title").html(F)}if(o(F)){if(f>0){K()}p=d;p[0].innerHTML=p[0].innerHTML.replace(/( ?\*\*\* ?)/g,"");p.addClass("scrum-card-header")}else{if(F.match(g)){C=F.match(g)[0];D=i(C.match(e)[0]);E=i(C.match(h)[0])}else{if(F.match(J)){E=i(F.match(J)[0])}}}if(D==E){L=" perfect"}else{if(D>E){L=" overrun"}else{L=""}}d[0].innerHTML=d[0].innerHTML.replace(J,M);d[0].innerHTML=d[0].innerHTML.replace(g,M);d[0].innerHTML=d[0].innerHTML.replace(H,j);if(E>0){d.prepend('<div class="scrum-card-progress'+L+'" style="background-color:'+s+";width:"+(D/E*100)+'%"></div>');$(d[0]).css("font-size",((E<8)?(90+(5*E)):130)+"%").css("line-height","1.2em")}x=x+D;m=m+E;if(p){P=P+D;f=f+E;N+=D;O+=E}d=false;F=C="";E=D=0});if(f>0){K()}q.parent().prepend('<small class="scrum-list-total'+L+'"><span class="scrum-light">'+x.toFixed(t)+"/</span>"+m.toFixed(t)+"</small>");if(m>0){q.parent(".list").prepend('<div class="scrum-list-progress"  style="background-color:'+s+";width:"+(x/m*100)+'%"></div>')}q=false;x=m=0});if(O>0){$(".board-header-btn:eq(2)").after('<div class="scrum-board-total board-header-btn board-header-btn-name"><span>Board Points: </span><span class="board-header-btn-text'+((N==O)?' perfect"':(N>O)?' overrun"':'"')+">"+((N!==0)?(N.toFixed(t)+"/"):"")+O.toFixed(t)+"</span></div>")}O=N=0};var n=function(){$(".scrum-board-total,.scrum-list-total,.scrum-list-progress,.scrum-card-progress").remove()};var c=function(){return d.hasClass("js-composer")};var o=function(A){return A.match(u)};var K=function(){$(p.find(".list-card-title")[0]).prepend('<small class="scrum-card-points'+((P>f)?" overrun":"")+'"><span class="scrum-light">'+P.toFixed(t)+"/</span>"+f.toFixed(t)+"</small>");P=f=0};var i=function(A){return parseFloat(A.match(b)[0])};var j=function(A){return'<small class="scrum-card-project" style="background:'+G(A)+'">'+A.replace(/\[|\]/g,"").toUpperCase()+"</small>"};var M=function(A){return'<small class="scrum-card-points'+L+'">'+A.replace(/\(|\)/g,"").toUpperCase()+"</small>"};var G=function(R){var S=0,Q=0,A=R.length;R=R.toLowerCase();for(;Q<A;Q++){S+=(R.charAt(Q).charCodeAt()*900)}return"hsla("+(S%256)+",50%,40%,1)"};return k})(AST||{});AST.init()})}(document));